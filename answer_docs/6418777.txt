<p>My best guess is the regex you're using is the problem, where you're telling it to basically pick out the entire string if it matches, including everything before and after what you're looking for.  So, the <code>TransformFilter</code> is probably being passed the entire matched string.  <code>transformUrl</code> as far as I can tell expects you to return the URL, so the entire string is linked to the first match group.</p>

<p>So, with that in mind, it's probably in your best interest to change the regex to something along the lines of <code>"\\$@(.+?)\\$@"</code> (with an added <code>?</code> in the group to make the match non-greedy) so as to avoid matching the entire string and just picking out the bit you want to URL-ize (for lack of a better term, plus adding -ize to words sounds cool).</p>