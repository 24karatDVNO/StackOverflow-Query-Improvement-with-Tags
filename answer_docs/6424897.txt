<p>From the discussion I eventually worked out that you're trying to create a username.</p>

<p>Automatic generation of usernames sucks. They do have to be unique though. Why not let your users pick their own names and reject ones that are already in use.</p>