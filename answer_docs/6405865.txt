<p>When I was faced with this problem, I ended up making one big query (<code>select * from hotelsxmedia join hotels on ... join media on ...</code>), which returns as many rows as the rows of the cross table (HotelsXMedia).  Just be sure to <code>order by hotelid</code>.  Then when you loop through the query results, you can take one action for every new hotelid (eg, append to array) and a different action for a row that repeats the same hotelid (eg, add the new media to it).</p>