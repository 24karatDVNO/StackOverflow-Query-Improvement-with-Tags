<p>I think you need check the query result at first.  </p>

<pre><code>if (!$result) {
    //handling empty set or error
}
</code></pre>