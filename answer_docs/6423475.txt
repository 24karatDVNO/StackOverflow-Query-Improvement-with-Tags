<p>It might look ugly but it's not that uncommon in some APIs to pass a double pointer.</p>

<p>In your case it seems unnecessary. Why does collect_file_paths not just return a pointer too?</p>