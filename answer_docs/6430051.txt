<p>I think what you are referring to is the typical producer-consumer problem.</p>

<p><a href="https://stackoverflow.com/questions/2332537/producer-consumer-threads-using-a-queue">Producer/Consumer threads using a Queue</a>
should help.</p>