<p>i'd use the database to lookup files. readdir can be slow and it can't be done with the same amount of intelligence a an sql query. also if you decide to move the dir s3 then you are limited by the choice of using readdir. also using readdir forces the files to be on the same server as the php client hwich is also another limitation.</p>