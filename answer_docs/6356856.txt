<p>it looks like impossible to create unique numbers with two different systems both offline when it must be chronological and without missing numbers.</p>

<p>imho there is no way if the last number (on the server) was 10, to know if i should return 11 or 12; i would have to know if 11 was already used by another person.</p>

<p>I can only imagine to use a temporary number and later on renumber those numbers, but if the invoices are printed and the number can not be changed, i don't know how you could accomplish such a solution.</p>