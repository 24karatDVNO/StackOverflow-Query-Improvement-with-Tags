<p>If you have control over the Java code, and there's not a standard network protocol you have to implement, then I would recommend a different approach.  Instead of pushing bytes around at this low a level, you can use a higher level serialization library, such as <a href="http://code.google.com/apis/protocolbuffers/" rel="nofollow">Google Protocol Buffers</a>.  There are both <a href="http://code.google.com/apis/protocolbuffers/docs/cpptutorial.html" rel="nofollow">C++ tutorials</a> and <a href="http://code.google.com/apis/protocolbuffers/docs/javatutorial.html" rel="nofollow">Java tutorials</a>, which should get you started.</p>