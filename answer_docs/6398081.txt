<p>try adding true to the time call time(true). That way it converts the result to a float, which can be used for arithmetic operations. I am not sure if that's the problem here, since the operation is done in SQL-land, but its worth a try.</p>