<p>The proper way of handling this is to keep track of what has been dynamically allocated, through <code>malloc()</code> or <code>strdup()</code>.</p>

<p>You have to refactor your program to reach this goal.</p>