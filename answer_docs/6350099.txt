<p>Have a look at the <a href="http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html" rel="nofollow">GNU Readline</a> library. It can provide input history support.</p>