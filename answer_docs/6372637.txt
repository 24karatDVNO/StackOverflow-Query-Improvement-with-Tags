<p>I know it's already accepted, but I worked on it so here it is: <a href="http://jsfiddle.net/hUgZE/6/" rel="nofollow">fiddled</a>. Simple implementation, works both ways.</p>