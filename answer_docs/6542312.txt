<p>Just introduce a common base class with a virtual destructor.  With the empty-base optimization, this probably won't add any overhead, and it will make <code>dynamic_cast</code> just work.</p>