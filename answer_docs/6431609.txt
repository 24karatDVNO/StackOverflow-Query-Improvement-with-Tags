<p>You'll need to create a function that parses one level, then have the function call itself when it finds a node inside the current level.  It's pretty complex and can get messy.  Out of curiosity, why would you do this when you can access all the information you need in object format using a SimpleXML object?</p>