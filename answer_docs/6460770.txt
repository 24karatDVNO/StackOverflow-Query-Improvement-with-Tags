<p>If you're writing a driver, why are using synthetic input events, instead of writing a X server driver module, that gets loaded by the X server? I'd start with the xf86-input-evdev driver as a starting point and rewrite it as needed.</p>

<p><a href="http://cgit.freedesktop.org/xorg/driver/xf86-input-evdev/tree/?h=master" rel="nofollow">http://cgit.freedesktop.org/xorg/driver/xf86-input-evdev/tree/?h=master</a></p>