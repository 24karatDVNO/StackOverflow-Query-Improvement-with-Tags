<p>Seems like your problem is complex enough to use some MVC framework such as <a href="http://www.springsource.com/?__utma=1.226437336.1308045323.1308045323.1308049230.2&amp;__utmb=1.1.10.1308920818&amp;__utmc=1&amp;__utmx=-&amp;__utmz=1.1308049230.2.2.utmcsr=google%7Cutmccn=%28organic%29%7Cutmcmd=organic%7Cutmctr=spring%20error%20tag&amp;__utmv=-&amp;__utmk=259908618" rel="nofollow">spring</a>. The trick is how you go from your working solution to the new one. I would suggest writing some <a href="http://seleniumhq.org/" rel="nofollow">selenium</a> tests to make sure that you dont break anything</p>

<p>Note: I'm assuming that you are dealing with production code here.</p>