<p>The documentation says that <a href="http://php.net/manual/en/function.gethostbynamel.php" rel="nofollow">gethostbynamel</a> returns FALSE if cannot resolve the hostname and that <a href="http://www.php.net/manual/en/function.gethostbyaddr.php" rel="nofollow">gethostbyaddr</a> returns the unmodified ip address on failure.</p>

<p>So check the results that are being returned by these functions and do something sensible if one of them fails.</p>