<p>I'd have a table which stores the purchases and bought credits, with user id. 
Then calculate each time based on this, it should be fast if it's indexed, this way you will be able to easily have a purchase history.</p>