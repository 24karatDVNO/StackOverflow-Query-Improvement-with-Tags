<p>You should not allocate memory on the heap but make Class2 in the stack. Then it will be destroyed on function exit.</p>