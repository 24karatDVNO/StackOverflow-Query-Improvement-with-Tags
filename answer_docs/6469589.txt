<p>I just copy pasted your code and ran it for 100,000 numbers and I didn't hit any stack overflow problem. Are you sure your swap and compare functions are working correctly as expected?</p>