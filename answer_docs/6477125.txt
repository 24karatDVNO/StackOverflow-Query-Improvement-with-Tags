<p>I think the calling mysql_query("COMMIT") needs to be determined by the success of previous queries. Thus, in the above code nothing is commited to db because one of the 2 previous queries fail.</p>